{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Jacob\\\\WebstormProjects\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Jacob\\\\WebstormProjects\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Jacob\\\\WebstormProjects\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Jacob\\\\WebstormProjects\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Jacob\\\\WebstormProjects\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Jacob\\\\WebstormProjects\\\\client\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Jacob\\\\WebstormProjects\\\\client\\\\src\\\\pages\\\\Inventory\\\\index.js\";\nimport React, { Component } from 'react';\nimport { Button, Container, Header, Segment, Table } from 'semantic-ui-react';\nimport firebase from 'firebase';\nimport Swal from 'sweetalert2';\nimport solace from 'solclientjs';\n\nvar inventory =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(inventory, _Component);\n\n  function inventory(props) {\n    var _this;\n\n    _classCallCheck(this, inventory);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(inventory).call(this, props));\n    _this.state = {\n      token: '',\n      inventory: []\n    };\n    _this.maketable = _this.maketable.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.orderButton = _this.orderButton.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.makeNotification = _this.makeNotification.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(inventory, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      firebase.database().ref('/token').on('value', function (snapshot) {\n        _this2.setState({\n          token: [snapshot.val().Token]\n        });\n      });\n      firebase.database().ref('/inventory').on('value', function (snapshot) {\n        _this2.setState({\n          inventory: snapshot.val()\n        });\n\n        if (snapshot.val().Errors.error !== '') {\n          _this2.makeNotification(snapshot.val().Errors.error);\n        }\n      });\n    }\n  }, {\n    key: \"maketable\",\n    value: function maketable(item) {\n      if (!item.hasOwnProperty(\"error\")) {\n        return React.createElement(Table.Row, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, item.name), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, item.cost), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        }, item.stock), React.createElement(Table.Cell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 49\n          },\n          __self: this\n        }, React.createElement(Button, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 50\n          },\n          __self: this\n        }, \"Order\")));\n      }\n\n      return null;\n    }\n  }, {\n    key: \"orderButton\",\n    value: function orderButton() {\n      var messageText = \"Sample Message\";\n      var message = solace.SolclientFactory.createMessage();\n      message.setDestination(solace.SolclientFactory.createTopicDestination(publisher.topicName));\n      message.setBinaryAttachment(messageText);\n      message.setDeliveryMode(solace.MessageDeliveryModeType.DIRECT);\n\n      if (publisher.session !== null) {\n        try {\n          publisher.session.send(message);\n          publisher.log(\"Message published.\");\n        } catch (error) {\n          publisher.log(error.toString());\n        }\n      } else {\n        publisher.log(\"Cannot publish because not connected to Solace message router.\");\n      }\n    }\n  }, {\n    key: \"makeNotification\",\n    value: function makeNotification(error) {\n      console.log(\"start request\");\n      fetch('https://fcm.googleapis.com/fcm/send', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: 'key=AAAAepQznBg:APA91bF0RrH9IZm-J5r1XnQaBYmeeokQ7h6rW1gV_GiWWUyzTC5ShddjE5BqOiG7kcMPD-rwZW61-1YqzZ_8GiBBdSM3q24yyeK0nUZiN2DWn5GgiPvpD2tgpPBzyeuw2qCe_oV5cIs_'\n        },\n        body: JSON.stringify({\n          notification: {\n            title: 'GreenHouse management System',\n            body: error\n          },\n          to: this.props.token\n        })\n      });\n      console.log('made Request');\n      firebase.database().ref('/users/TFSInAIyjZasPfyanDjsveMmdRH2/greenHouses/-LO6EC8taWQp_X6WGnS1/Errors').update({\n        error: ''\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(React.Fragment, null, React.createElement(Segment, {\n        vertical: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Container, {\n        text: true,\n        style: {\n          textAlign: 'center',\n          marginTop: '20px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Header, {\n        as: \"h3\",\n        style: {\n          fontSize: '2em'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, \"Inventory\"), React.createElement(Table, {\n        celled: true,\n        structured: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(Table.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(Table.Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Table.HeaderCell, {\n        rowSpan: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Name\"), React.createElement(Table.HeaderCell, {\n        rowSpan: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Cost\"), React.createElement(Table.HeaderCell, {\n        rowSpan: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Stock\"), React.createElement(Table.HeaderCell, {\n        colSpan: \"3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Order\"))), React.createElement(Table.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, Object.values(this.state.inventory).map(this.maketable))))));\n    }\n  }]);\n\n  return inventory;\n}(Component);\n\nexport default inventory;","map":{"version":3,"sources":["C:\\Users\\Jacob\\WebstormProjects\\client\\src\\pages\\Inventory\\index.js"],"names":["React","Component","Button","Container","Header","Segment","Table","firebase","Swal","solace","inventory","props","state","token","maketable","bind","orderButton","makeNotification","database","ref","on","snapshot","setState","val","Token","Errors","error","item","hasOwnProperty","name","cost","stock","messageText","message","SolclientFactory","createMessage","setDestination","createTopicDestination","publisher","topicName","setBinaryAttachment","setDeliveryMode","MessageDeliveryModeType","DIRECT","session","send","log","toString","console","fetch","method","headers","Authorization","body","JSON","stringify","notification","title","to","update","textAlign","marginTop","fontSize","Object","values","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {\n  Button,\n  Container,\n  Header,\n  Segment,\n  Table,\n} from 'semantic-ui-react';\nimport firebase from 'firebase';\nimport Swal from 'sweetalert2'\nimport solace from 'solclientjs';\n\nclass inventory extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: '',\n      inventory: [],\n    };\n    this.maketable = this.maketable.bind(this);\n    this.orderButton = this.orderButton.bind(this);\n    this.makeNotification = this.makeNotification.bind(this);\n  }\n\n  componentDidMount() {\n    firebase.database().ref('/token').on('value', (snapshot) => {\n      this.setState({\n        token: [snapshot.val().Token],\n      });\n    });\n\n    firebase.database().ref('/inventory').on('value', (snapshot) => {\n      this.setState({\n        inventory: snapshot.val(),\n      });\n      if (snapshot.val().Errors.error !== '') {\n        this.makeNotification(snapshot.val().Errors.error);\n      }\n    });\n  }\n\n  maketable(item) {\n    if (!item.hasOwnProperty(\"error\")) {\n      return (\n          <Table.Row>\n            <Table.Cell>{item.name}</Table.Cell>\n            <Table.Cell>{item.cost}</Table.Cell>\n            <Table.Cell >{item.stock}</Table.Cell>\n            <Table.Cell >\n              <Button>Order</Button>\n            </Table.Cell>\n          </Table.Row>\n      );\n    }\n    return null;\n  }\n\n  orderButton(){\n    var messageText = \"Sample Message\";\n    var message = solace.SolclientFactory.createMessage();\n    message.setDestination(solace.SolclientFactory.createTopicDestination(publisher.topicName));\n    message.setBinaryAttachment(messageText);\n    message.setDeliveryMode(solace.MessageDeliveryModeType.DIRECT);\n    if (publisher.session !== null) {\n      try {\n        publisher.session.send(message);\n        publisher.log(\"Message published.\");\n      } catch (error) {\n        publisher.log(error.toString());\n      }\n    } else {\n      publisher.log(\"Cannot publish because not connected to Solace message router.\");\n    }\n  }\n\n\n\n  makeNotification(error) {\n    console.log(\"start request\");\n    fetch('https://fcm.googleapis.com/fcm/send', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: 'key=AAAAepQznBg:APA91bF0RrH9IZm-J5r1XnQaBYmeeokQ7h6rW1gV_GiWWUyzTC5ShddjE5BqOiG7kcMPD-rwZW61-1YqzZ_8GiBBdSM3q24yyeK0nUZiN2DWn5GgiPvpD2tgpPBzyeuw2qCe_oV5cIs_',\n      },\n      body: JSON.stringify({\n        notification: {\n          title: 'GreenHouse management System',\n          body: error,\n        },\n        to: this.props.token,\n      }),\n    });\n    console.log('made Request');\n    firebase.database().ref('/users/TFSInAIyjZasPfyanDjsveMmdRH2/greenHouses/-LO6EC8taWQp_X6WGnS1/Errors').update(\n      {\n        error: '',\n      },\n    );\n  }\n\n\n  render() {\n    return (\n      <>\n        <Segment vertical>\n          <Container text style={{ textAlign: 'center', marginTop: '20px' }}>\n            <Header as=\"h3\" style={{ fontSize: '2em' }}>\n              Inventory\n            </Header>\n            <Table celled structured>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell rowSpan='2'>Name</Table.HeaderCell>\n                  <Table.HeaderCell rowSpan='2'>Cost</Table.HeaderCell>\n                  <Table.HeaderCell rowSpan='2'>Stock</Table.HeaderCell>\n                  <Table.HeaderCell colSpan='3'>Order</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n              <Table.Body>\n                {\n                  Object.values(this.state.inventory).map(this.maketable)\n                }\n              </Table.Body>\n            </Table>\n          </Container>\n        </Segment>\n      </>\n    );\n  }\n}\n\nexport default inventory;\n"]},"metadata":{},"sourceType":"module"}